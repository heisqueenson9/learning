@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --clr: #2563eb;
    --bg-color: #fbfbfd;
    --text-color: #1d1d1f;
    --glass-bg: rgba(255, 255, 255, 0.65);
    --glass-border: rgba(0, 0, 0, 0.08);
    --glass-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 10px 30px -3px rgba(0, 0, 0, 0.1);
  }

  .dark {
    --bg-color: #000000;
    --text-color: #f5f5f7;
    --glass-bg: rgba(28, 28, 30, 0.65);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 10px 30px -3px rgba(0, 0, 0, 0.5);
  }

  body {
    @apply antialiased transition-colors duration-500;
    background-color: var(--bg-color);
    color: var(--text-color);
  }
}

@layer utilities {

  /* Premium iOS 26 Liquid Glass — theme aware */
  .glass {
    @apply backdrop-blur-[24px] saturate-[180%] rounded-[24px] transition-all duration-500;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), inset 0 0 1px rgba(255, 255, 255, 0.1);
  }

  /* Liquid Glass Input */
  .glass-input {
    @apply w-full bg-light-surface/50 dark:bg-dark-surface/50 backdrop-blur-md rounded-xl px-4 py-3.5 border border-light-border dark:border-dark-border text-light-text dark:text-dark-text placeholder:text-light-subtext dark:placeholder:text-dark-subtext focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all duration-300 shadow-sm hover:shadow-md hover:bg-light-surface/80 dark:hover:bg-dark-surface/80;
  }

  /* Floating Animation for Cards */
  .float-card {
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
  }

  .float-card:hover {
    transform: translateY(-4px) scale(1.01);
    box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.15), 0 10px 20px -5px rgba(0, 0, 0, 0.1);
  }

  .dark .float-card:hover {
    box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.5), 0 10px 20px -5px rgba(0, 0, 0, 0.3);
  }

  /* Logo Styling */
  .logo {
    position: relative;
    width: 160px;
    height: 160px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    background: radial-gradient(circle at center, rgba(37, 99, 235, 0.2), transparent 70%);
  }

  .logo img {
    width: 90%;
    height: 90%;
    object-fit: contain;
    z-index: 2;
    filter: drop-shadow(0 0 15px rgba(37, 99, 235, 0.5));
  }

  /* Animated Liquid Ring around Logo */
  .logo::before {
    content: "";
    position: absolute;
    inset: -5px;
    border-radius: 50%;
    background: conic-gradient(from 0deg, transparent, var(--clr, #2563eb), transparent 60%);
    animation: spin 4s linear infinite;
    opacity: 0.8;
    filter: blur(8px);
    z-index: 0;
  }

  .logo::after {
    content: "";
    position: absolute;
    inset: 5px;
    border-radius: 50%;
    background: var(--bg-color);
    z-index: 1;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  /* Fade-up entrance animation with scroll timeline fallback */
  .box {
    opacity: 1;
    transform: none;
    /* Scroll-driven animation — supported in Chrome 115+ */
  }

  @supports (animation-timeline: view()) {
    .box {
      animation: fadeUp linear;
      animation-timeline: view();
      animation-range: entry 0% cover 40%;
    }
  }

  @supports not (animation-timeline: view()) {

    /* Fallback: simple fade-in on page load */
    .box {
      animation: fadeUp 0.6s ease-out both;
    }
  }

  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(40px) scale(0.9);
    }

    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* Scale-in animation for quiz */
  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.96);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-scale-in {
    animation: scale-in 0.3s ease-out both;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-700 rounded-full hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors;
  }
}